"use strict";(self.webpackChunkstarcoin_cookbook=self.webpackChunkstarcoin_cookbook||[]).push([[975],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var o=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(t),m=i,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return t?o.createElement(g,r(r({ref:n},p),{},{components:t})):o.createElement(g,r({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,r=new Array(a);r[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var c=2;c<a;c++)r[c]=t[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2215:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return r},default:function(){return u},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return c}});var o=t(3117),i=(t(7294),t(3905));const a={},r="How to create a custom Starcoin network",s={unversionedId:"getting-started/setup/private-network",id:"getting-started/setup/private-network",title:"How to create a custom Starcoin network",description:"starcoin supports running a user-defined blockchain network, which is convenient for users to build a private chain for testing or secondary development.",source:"@site/docs/02-getting-started/02-setup/07-private-network.md",sourceDirName:"02-getting-started/02-setup",slug:"/getting-started/setup/private-network",permalink:"/docs/getting-started/setup/private-network",draft:!1,editUrl:"https://github.com/starcoinorg/starcoin-cookbook/edit/main/docs/02-getting-started/02-setup/07-private-network.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How to participate in the main network",permalink:"/docs/getting-started/setup/main-network"},next:{title:"How to participate in the vega network",permalink:"/docs/getting-started/setup/vega-network"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Initialize custom network",id:"initialize-custom-network",level:2},{value:"Generate genesis configuration file",id:"generate-genesis-configuration-file",level:3},{value:"Generate genesis block",id:"generate-genesis-block",level:3},{value:"Running custom network nodes",id:"running-custom-network-nodes",level:2},{value:"Form a custom network cluster",id:"form-a-custom-network-cluster",level:2},{value:"If you want run custom network in one local machine for test",id:"if-you-want-run-custom-network-in-one-local-machine-for-test",level:3}],p={toc:c};function u(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-to-create-a-custom-starcoin-network"},"How to create a custom Starcoin network"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"starcoin")," supports running a user-defined blockchain network, which is convenient for users to build a private chain for testing or secondary development."),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"There are six built-in networks in ",(0,i.kt)("inlineCode",{parentName:"p"},"starcoin"),", namely: ",(0,i.kt)("inlineCode",{parentName:"p"},"test, dev, halley, proxima, barnard, main"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"test")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"dev")," are for local development, ",(0,i.kt)("inlineCode",{parentName:"p"},"halley"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"proxima")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"barnard")," are the test networks, and the ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," network is the official network."),(0,i.kt)("p",null,"Next, we will introduce how to build the Starcoin private network."),(0,i.kt)("h2",{id:"initialize-custom-network"},"Initialize custom network"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"starcoin_generator")," command is used to generate genesis configuration files and genesis blocks."),(0,i.kt)("h3",{id:"generate-genesis-configuration-file"},"Generate genesis configuration file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin_generator -n <CHAIN_NAME>:<CHAIN_ID> --genesis-config <GENESIS_CONFIG> genesis_config\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"genesis_config")," subcommand is used to generate the genesis configuration file."),(0,i.kt)("li",{parentName:"ul"},"To initialize and run a custom blockchain network, you need to use the ",(0,i.kt)("inlineCode",{parentName:"li"},"-n, --net")," option to specify the name of the chain and the id of the chain. The parameters are concatenated by ",(0,i.kt)("inlineCode",{parentName:"li"},":"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CHAIN_NAME")," represents the name of the chain, which will be used as the name of the data directory."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CHAIN_ID")," represents the id of the chain, of type ",(0,i.kt)("inlineCode",{parentName:"li"},"u8"),"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"--genesis_config")," specifies the configuration file used to generate the genesis block. The parameter can use the built-in blockchain network name, indicating that the network configuration is reused, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"halley"),"; it can also be the path of the configuration file.")),(0,i.kt)("p",null,"For example, to generate a custom network named ",(0,i.kt)("inlineCode",{parentName:"p"},"my_chain")," with id ",(0,i.kt)("inlineCode",{parentName:"p"},"123"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin_generator -n my_chain:123 --genesis-config halley genesis_config\n")),(0,i.kt)("p",null,"This command uses the built-in ",(0,i.kt)("inlineCode",{parentName:"p"},"halley")," network configuration as a template and generates configuration files named ",(0,i.kt)("inlineCode",{parentName:"p"},"genesis_config.json")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"genesis_config2.json")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.starcoin/my_chain")," directory.\nParameters in the ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.starcoin/my_chain/genesis_config.json")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.starcoin/my_chain/genesis_config2.json")," file can be modified with an editor."),(0,i.kt)("p",null,"Note: If you don't want the configuration file to be generated in the default ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.starcoin/<CHAIN_NAME>")," directory, you can also specify the directory with the ",(0,i.kt)("inlineCode",{parentName:"p"},"-d")," option."),(0,i.kt)("h3",{id:"generate-genesis-block"},"Generate genesis block"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"genesis")," subcommand is used to generate the genesis block."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin_generator -n my_chain:123 genesis\n")),(0,i.kt)("p",null,"This command generates the genesis block according to the genesis configuration file generated earlier."),(0,i.kt)("p",null,"The genesis configuration file in the above example is ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.starcoin/my_chain/genesis_config2.json"),". Of course, you can also place the ",(0,i.kt)("inlineCode",{parentName:"p"},"genesis_config2.json")," file in another location and specify it with an absolute path, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin_generator -n my_chain:123 --genesis-config /data/conf/my_chain/genesis_config2.json genesis\n")),(0,i.kt)("h2",{id:"running-custom-network-nodes"},"Running custom network nodes"),(0,i.kt)("p",null,"Use the following command to start a custom network node:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin -n my_chain:123 console\n")),(0,i.kt)("h2",{id:"form-a-custom-network-cluster"},"Form a custom network cluster"),(0,i.kt)("p",null,"After starting a node, you can find the address of the node in the log or standard output, record the IP address of the machine, and then use it for networking. It may look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"2022-05-25T11:27:10.201604911+00:00 INFO - Self address is: /ip4/127.0.0.1/tcp/9840/p2p/12D3KooWR1p3uxnWZ2rv5mZ3Sw2i8z3gabxNEHjgkPDC2pkk19Vp\n")),(0,i.kt)("p",null,"Specify the first node as the seed node by ",(0,i.kt)("inlineCode",{parentName:"p"},"--seed"),", and then start other nodes to form a network."),(0,i.kt)("p",null,"Note: Multiple nodes must use the same genesis configuration file to generate genesis blocks in order to form a network."),(0,i.kt)("p",null,"On other machines, you can add to your private network by starting a new node and specifying the IP address of the genesis node using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--seed")," option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin -n my_chain:123 --seed /ip4/ip of genesis seed/tcp/9840/p2p/12D3KooWR1p3uxnWZ2rv5mZ3Sw2i8z3gabxNEHjgkPDC2pkk19Vp console\n")),(0,i.kt)("h3",{id:"if-you-want-run-custom-network-in-one-local-machine-for-test"},"If you want run custom network in one local machine for test"),(0,i.kt)("p",null,"First, start one node as the genesis seed, which is already started if you follow the steps, and check your local ip address."),(0,i.kt)("p",null,"Second, copy the ",(0,i.kt)("em",{parentName:"p"},"genesis_config.json")," and ",(0,i.kt)("em",{parentName:"p"},"genesis_config2.json"),"configuration file of the genesis seed node to a new directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"cp ~/.starcoin/my_chain/genesis_config.json ~/.starcoin1/my_chain/\ncp ~/.starcoin/my_chain/genesis_config2.json ~/.starcoin1/my_chain/\n")),(0,i.kt)("p",null,"Third, start other node using docker with following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker run --name starcoin-p1 -d -v ~/.starcoin1/:/root/.starcoin/ starcoin/starcoin:latest /starcoin/starcoin -n my_chain:123 --seed /ip4/ip of genesis seed/tcp/9840/p2p/12D3KooWR1p3uxnWZ2rv5mZ3Sw2i8z3gabxNEHjgkPDC2pkk19Vp\n")))}u.isMDXComponent=!0}}]);