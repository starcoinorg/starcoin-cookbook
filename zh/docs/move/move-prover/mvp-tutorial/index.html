<!doctype html>
<html class="docs-version-current" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">éªŒè¯æ™ºèƒ½åˆçº¦ï¼šMove Prover æ•™ç¨‹ | Starcoin Cookbook</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://starcoinorg.github.io/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="éªŒè¯æ™ºèƒ½åˆçº¦ï¼šMove Prover æ•™ç¨‹ | Starcoin Cookbook"><meta data-rh="true" name="description" content="ä»€ä¹ˆæ˜¯ Move Prover"><meta data-rh="true" property="og:description" content="ä»€ä¹ˆæ˜¯ Move Prover"><link data-rh="true" rel="icon" href="/starcoin-cookbook/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://starcoinorg.github.io/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial"><link data-rh="true" rel="alternate" href="https://starcoinorg.github.io/starcoin-cookbook/docs/move/move-prover/mvp-tutorial" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://starcoinorg.github.io/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://starcoinorg.github.io/starcoin-cookbook/docs/move/move-prover/mvp-tutorial" hreflang="x-default"><link rel="stylesheet" href="/starcoin-cookbook/zh/assets/css/styles.78689d21.css">
<link rel="preload" href="/starcoin-cookbook/zh/assets/js/runtime~main.0d178442.js" as="script">
<link rel="preload" href="/starcoin-cookbook/zh/assets/js/main.de359a5d.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/starcoin-cookbook/zh/"><div class="navbar__logo"><img src="/starcoin-cookbook/zh/img/logo.svg" alt="Starcoin Cookbook" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/starcoin-cookbook/zh/img/logo.svg" alt="Starcoin Cookbook" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Starcoin Cookbook</b></a><a class="navbar__item navbar__link navbar__link--active" href="/starcoin-cookbook/zh/docs/intro">Documents</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/starcoin-cookbook/docs/move/move-prover/mvp-tutorial" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ä¸­æ–‡</a></li></ul></div><a href="https://github.com/starcoinorg/starcoin-cookbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/starcoin-cookbook/zh/docs/intro">Starcoin CookBook Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/starcoin-cookbook/zh/docs/getting-started/install/">å…¥é—¨</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/starcoin-cookbook/zh/docs/move/">Move å’Œæ™ºèƒ½åˆçº¦å¼€å‘</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒMove å’Œæ™ºèƒ½åˆçº¦å¼€å‘ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/prepare-move-env">è®¾ç½® Move å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-language/">Move è¯­è¨€</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒMove è¯­è¨€ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/understanding-ability">è®¤è¯† Abilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-package-manager">Move åŒ…ç®¡ç†å™¨ç”¨æˆ·æŒ‡å—</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/starcoin-framework/">Starcoin Move Framework</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒStarcoin Move Frameworkã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/deploy-first-move-contract">éƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/interacting-with-the-contract">ä¸åˆçº¦äº¤äº’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/module-dependency">Understanding module dependency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/how-to-upgrade">How to upgrade Move Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/for-solidity-developer">For solidity developer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-test/move-unit-test">How to test Move Module</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-examples/create-a-new-token">More Move Examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/starcoin-cookbook/zh/docs/move/advance-move/how-to-design-permission-system">Advance Move Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-prover/move-spec-language">Move è§„èŒƒè¯­è¨€å’Œ Move Prover</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-prover/move-spec-language">Move è§„èŒƒè¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial">éªŒè¯æ™ºèƒ½åˆçº¦ï¼šMove Prover æ•™ç¨‹</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/starcoin-cookbook/zh/docs/web3/">Web3 and DApp Development</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒWeb3 and DApp Developmentã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/starcoin-cookbook/zh/docs/reference/">Reference</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒReferenceã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/starcoin-cookbook/zh/docs/concepts/merkletree">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/starcoin-cookbook/zh/docs/miscellaneous/contributing">æ‚é¡¹</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/starcoin-cookbook/zh/">ğŸ </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/starcoin-cookbook/zh/docs/move/">Move å’Œæ™ºèƒ½åˆçº¦å¼€å‘</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Move è§„èŒƒè¯­è¨€å’Œ Move Prover</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/starcoin-cookbook/zh/docs/move/move-prover/mvp-tutorial">éªŒè¯æ™ºèƒ½åˆçº¦ï¼šMove Prover æ•™ç¨‹</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>éªŒè¯æ™ºèƒ½åˆçº¦ï¼šMove Prover æ•™ç¨‹</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="ä»€ä¹ˆæ˜¯-move-prover">ä»€ä¹ˆæ˜¯ Move Prover<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-move-prover" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å½¢å¼åŒ–éªŒè¯æ˜¯ä¸€ç§ä½¿ç”¨ä¸¥æ ¼çš„æ•°å­¦æ–¹æ³•æ¥æè¿°è¡Œä¸ºå’Œæ¨ç†è®¡ç®—æœºç³»ç»Ÿçš„æ­£ç¡®æ€§çš„æŠ€æœ¯ã€‚ç°åœ¨å·²ç»åœ¨æ“ä½œç³»ç»Ÿã€ç¼–è¯‘å™¨ç­‰å¯¹æ­£ç¡®æ€§è¦æ±‚é«˜çš„é¢†åŸŸæœ‰ä¸€å®šåº”ç”¨ã€‚</p><p>éƒ¨ç½²åœ¨åŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦æ“çºµç€å„ç§æ•°å­—èµ„äº§ï¼Œå®ƒä»¬çš„æ­£ç¡®æ€§ä¹Ÿååˆ†å…³é”®ã€‚ <em>Move Prover (MVP)</em> å°±æ˜¯ä¸ºé˜²æ­¢ Move è¯­è¨€ç¼–å†™çš„æ™ºèƒ½åˆçº¦ä¸­çš„é”™è¯¯è€Œè®¾è®¡ã€‚
ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <em>Move è§„èŒƒè¯­è¨€ (MSL)</em> æŒ‡å®šæ™ºèƒ½åˆçº¦çš„åŠŸèƒ½å±æ€§ï¼Œç„¶åä½¿ç”¨ Move Prover è‡ªåŠ¨é™æ€åœ°æ£€æŸ¥å®ƒä»¬ã€‚</p><p>ç®€å•åœ°è¯´ï¼ŒMove æ–‡ä»¶ä¸­å¯ä»¥æœ‰ä¸¤ç§æˆåˆ†ï¼š</p><ul><li>ä¸€éƒ¨åˆ†æ˜¯ç¨‹åºä»£ç ï¼Œè¿™æ˜¯æˆ‘ä»¬å¤šæ•°äººæœ€ç†Ÿæ‚‰çš„éƒ¨åˆ†ã€‚å®ƒç”¨ Move ç¨‹åºè¯­è¨€ (æœ‰æ—¶å€™ä¹Ÿç›´æ¥å« Move è¯­è¨€) å†™æˆã€‚æˆ‘ä»¬ç”¨å®ƒå®šä¹‰æ•°æ®ç±»å‹ã€å‡½æ•°ã€‚</li><li>å¦ä¸€éƒ¨åˆ†æ˜¯å½¢å¼è§„èŒƒ (Formal specification)ã€‚å®ƒæ˜¯å¯é€‰çš„ï¼Œç”¨ Move è§„èŒƒè¯­è¨€å†™æˆã€‚æˆ‘ä»¬ç”¨å®ƒè¯´æ˜ç¨‹åºä»£ç åº”è¯¥æ»¡è¶³æ€æ ·çš„æ€§è´¨ã€‚æ¯”å¦‚æè¿°å‡½æ•°çš„è¡Œä¸ºã€‚</li></ul><p>å½“æˆ‘ä»¬å†™äº†å½¢å¼è§„èŒƒçš„æ—¶å€™ï¼Œè°ƒç”¨ Move Prover åï¼Œå®ƒä¼šæŒ‰ç…§å†™çš„è§„èŒƒå»éªŒè¯ Move ç¨‹åºæœ‰æ²¡æœ‰æ»¡è¶³è¿™äº›è¦æ±‚ï¼Œå¸®åŠ©å¼€å‘äººå‘˜åœ¨å¼€å‘é˜¶æ®µå°½æ—©å‘ç°æ½œåœ¨çš„é—®é¢˜ï¼Œ
å¹¶è®©å…¶å®ƒç”¨æˆ·å¯¹å·²ç»éªŒè¯è¿‡çš„ç¨‹åºæ€§è´¨æœ‰ä¿¡å¿ƒã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="å®‰è£…-prover-çš„ä¾èµ–">å®‰è£… Prover çš„ä¾èµ–<a class="hash-link" href="#å®‰è£…-prover-çš„ä¾èµ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ä½¿ç”¨ Move Prover å‰ï¼Œæˆ‘ä»¬å…ˆå®‰è£…å®ƒçš„ä¸€äº›å¤–éƒ¨ä¾èµ–ã€‚
å‡è®¾ä½ å·²ç»æœ‰äº†ä¸€ä»½ <a href="https://github.com/starcoinorg/starcoin/issues" target="_blank" rel="noopener noreferrer">Starcoin</a> çš„æºä»£ç ï¼Œå¹¶ä¸”å·²ç»æ„å»ºäº†é¡¹ç›®ã€‚
æˆ‘ä»¬åˆ‡æ¢åˆ° Starcoin çš„æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$PATH_TO_STARCOIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./scripts/dev_setup.sh -ypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> ~/.profile</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å½“ä¸Šé¢çš„å‘½ä»¤æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¾“å…¥ <code>boogie /version</code>ï¼Œå¦‚æœè¾“å‡ºç±»ä¼¼ &quot;Boogie program verifier version X.X.X&quot;ï¼Œé‚£ä¹ˆå®‰è£…å·²ç»æˆåŠŸã€‚</p><p>æ³¨æ„ï¼Œç›®å‰ Move Prover åªèƒ½åœ¨ UNIX ç³»æ“ä½œç³»ç»Ÿä¸‹è¿è¡Œï¼ˆä¾‹å¦‚ Linuxã€macOSï¼‰ã€‚
Windows ç”¨æˆ·å¯ä»¥é€šè¿‡å®‰è£… <a href="https://docs.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener noreferrer">WSL</a> æ¥è¿è¡Œã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="å‡†å¤‡è¦éªŒè¯çš„ç¤ºä¾‹">å‡†å¤‡è¦éªŒè¯çš„ç¤ºä¾‹<a class="hash-link" href="#å‡†å¤‡è¦éªŒè¯çš„ç¤ºä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="é¡¹ç›®åˆ›å»º">é¡¹ç›®åˆ›å»º<a class="hash-link" href="#é¡¹ç›®åˆ›å»º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º Move åŒ…ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mpm package new BasicCoin</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å¯ä»¥çœ‹åˆ°å®ƒçš„ç›®å½•ç»“æ„å¦‚ä¸‹</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">BasicCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |---- Move.toml (text file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `---- sources   (Directory)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ¨¡å—ä»£ç ">æ¨¡å—ä»£ç <a class="hash-link" href="#æ¨¡å—ä»£ç " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç°åœ¨åˆ›å»º <code>BasicCoin/sources/BasicCoin.move</code>.</p><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary> BasicCoin.move å†…å®¹</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/// This module defines a minimal and generic Coin and Balance.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module NamedAddr::BasicCoin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use StarcoinFramework::Errors;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use StarcoinFramework::Signer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Error codes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const ENOT_MODULE_OWNER: u64 = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const EINSUFFICIENT_BALANCE: u64 = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const EALREADY_HAS_BALANCE: u64 = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Coin&lt;phantom CoinType&gt; has store {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value: u64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Balance&lt;phantom CoinType&gt; has key {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin: Coin&lt;CoinType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Publish an empty balance resource under `account`&#x27;s address. This function must be called before</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// minting or transferring to the account.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public fun publish_balance&lt;CoinType&gt;(account: &amp;signer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let empty_coin = Coin&lt;CoinType&gt; { value: 0 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert!(!exists&lt;Balance&lt;CoinType&gt;&gt;(Signer::address_of(account)), Errors::already_published(EALREADY_HAS_BALANCE));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        move_to(account, Balance&lt;CoinType&gt; { coin:  empty_coin });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Mint `amount` tokens to `mint_addr`. This method requires a witness with `CoinType` so that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// module that owns `CoinType` can decide the minting policy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public fun mint&lt;CoinType: drop&gt;(mint_addr: address, amount: u64, _witness: CoinType) acquires Balance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Deposit `total_value` amount of tokens to mint_addr&#x27;s balance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deposit(mint_addr, Coin&lt;CoinType&gt; { value: amount });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public fun balance_of&lt;CoinType&gt;(owner: address): u64 acquires Balance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        borrow_global&lt;Balance&lt;CoinType&gt;&gt;(owner).coin.value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Transfers `amount` of tokens from `from` to `to`. This method requires a witness with `CoinType` so that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// module that owns `CoinType` can  decide the transferring policy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public fun transfer&lt;CoinType: drop&gt;(from: &amp;signer, to: address, amount: u64, _witness: CoinType) acquires Balance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let addr_from = Signer::address_of(from);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let check = withdraw&lt;CoinType&gt;(addr_from, amount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deposit&lt;CoinType&gt;(to, check);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun withdraw&lt;CoinType&gt;(addr: address, amount: u64) : Coin&lt;CoinType&gt; acquires Balance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let balance = balance_of&lt;CoinType&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert!(balance &gt;= amount, EINSUFFICIENT_BALANCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let balance_ref = &amp;mut borrow_global_mut&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *balance_ref = balance - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Coin&lt;CoinType&gt; { value: amount }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun deposit&lt;CoinType&gt;(addr: address, check: Coin&lt;CoinType&gt;) acquires Balance{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let balance = balance_of&lt;CoinType&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let balance_ref = &amp;mut borrow_global_mut&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let Coin { value } = check;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *balance_ref = balance + value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div></div></div></details><p>è¿™é‡Œæˆ‘ä»¬å‡è®¾æ‚¨å·²ç»å¯¹ Move è¯­è¨€æœ‰ä¸€å®šæŒæ¡ï¼Œå¹¶èƒ½ç†è§£ä¸Šé¢ BasicCoin.move çš„æºç å’ŒçŸ¥é“å„ä¸ªéƒ¨åˆ†çš„ä½œç”¨ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="toml-é…ç½®">TOML é…ç½®<a class="hash-link" href="#toml-é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>BasicCoin ä½¿ç”¨åˆ°äº† Starcoin æ ‡å‡†åº“çš„ä¸€äº›è®¾æ–½ï¼Œä¹Ÿè¦æŠŠ StarcoinFramework æ·»åŠ åˆ°ä¾èµ–å½“ä¸­ã€‚
åŒæ—¶ï¼ŒBasicCoin ä¸­ç”¨åˆ°äº†å‘½ååœ°å€ï¼Œæˆ‘ä»¬ä¹Ÿè¦æŒ‡å®šå®ƒåº”è¯¥è¢«ä½•æ•°å€¼åœ°å€æ›¿æ¢ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬æŠŠ Move.toml ä¿®æ”¹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name = &quot;BasicCoin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version = &quot;0.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[addresses]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NamedAddr = &quot;0xcafe&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StarcoinFramework = { git = &quot;https://github.com/starcoinorg/starcoin-framework&quot;, rev=&quot;01c84198819310620f2417413c3c800df8292ae5&quot; }</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="ç¬¬ä¸€æ®µéªŒè¯ä»£ç ">ç¬¬ä¸€æ®µéªŒè¯ä»£ç <a class="hash-link" href="#ç¬¬ä¸€æ®µéªŒè¯ä»£ç " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸ºäº†è®©æˆ‘ä»¬å¯¹ Move Prover çš„ä½¿ç”¨æœ‰ä¸€ä¸ªåˆæ­¥å°è±¡ï¼Œåœ¨ <code>BasicCoin.move</code> ä¸­ æ·»åŠ ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec balance_of {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pragma aborts_if_is_strict;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>è¯­æ³•ä¸Šï¼Œè¿™æ®µä»£ç å¯ä»¥æ·»åŠ åœ¨ BasicCoin è¿™ä¸ªæ¨¡å—å†…çš„ä»»ä½•åœ°æ–¹ï¼Œ
ä½†ä¸ºäº†è®©é˜…è¯»ä»£ç çš„æ—¶å€™æ–¹ä¾¿æ¸…æ™°åœ°çœ‹åˆ°å®šä¹‰å’Œè§„èŒƒçš„å¯¹åº”å…³ç³»ï¼Œ
æ¨èæŠŠå®ƒå°±æ”¾åœ¨ <code>balance_of</code> å‡½æ•°çš„å®šä¹‰åé¢ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œ<code>spec balance_of {...}</code> è¿™ä¸ªä»£ç å—å°†ä¼šåŒ…å«æˆ‘ä»¬å¯¹ <code>balance_of</code> è¿™ä¸ªå‡½æ•°çš„ <em>æ€§è´¨è§„èŒƒ (property specification)</em>ã€‚
æ€§è´¨è§„èŒƒæœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„ä¸€äº›ä¾‹å­æœ‰ï¼š</p><ul><li>è¿™ä¸ªå‡½æ•°ä¼šå¼‚å¸¸ä¸­æ­¢ (abort) å—ï¼Ÿå®ƒåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¼‚å¸¸ä¸­æ­¢ï¼Ÿ</li><li>è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å‚æ•°è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ</li><li>è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯æ€æ ·çš„ï¼Ÿ</li><li>å‡½æ•°æ‰§è¡Œåï¼Œä¼šå¯¹è™šæ‹ŸæœºçŠ¶æ€äº§ç”Ÿæ€æ ·çš„æ”¹å˜ï¼Ÿ</li><li>è¿™ä¸ªå‡½æ•°ä¼šç»´æŒæ€æ ·çš„ä¸å˜é‡ (invariant)ï¼Ÿ</li></ul><p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ç»™å‡ºä»»ä½•ä¸­æ­¢æ¡ä»¶æ—¶ï¼ŒMove Prover é»˜è®¤å…è®¸ä¸€åˆ‡å¯èƒ½çš„å¼‚å¸¸ä¸­æ­¢ã€‚
è€Œä¸Šé¢è¿™ä¸ªç®€å•çš„ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬ç”¨æŒ‡ç¤º <code>aborts_if_is_strict</code> å‘Šè¯‰ Proverï¼š</p><blockquote><p>æˆ‘å¸Œæœ›ä¸¥æ ¼æ£€æŸ¥è¿™ä¸ªå‡½æ•°çš„å¼‚å¸¸ä¸­æ­¢çš„å¯èƒ½ã€‚å¦‚æœå‡ºç°äº†ä»»ä½•ç¨‹åºå‘˜æ²¡æœ‰åˆ—å‡ºçš„ä¸­æ­¢çš„æƒ…å†µï¼Œè¯·æŠ¥é”™ã€‚</p></blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ <code>BasicCoin</code> ç›®å½•ä¸‹è¿è¡Œè¯æ˜å‘½ä»¤ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mpm package prove</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>mpm ä¼šè°ƒç”¨ Move Prover å¯¹åŒ…å†…çš„ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Prover æŠ¥ä¸‹é¢è¿™æ ·çš„é”™è¯¯ä¿¡æ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">error: abort not covered by any of the `aborts_if` clauses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”Œâ”€ ./sources/BasicCoin.move:38:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">35 â”‚           borrow_global&lt;Balance&lt;CoinType&gt;&gt;(owner).coin.value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚           ------------- abort happened here with execution failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Â·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">38 â”‚ â•­     spec balance_of {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">39 â”‚ â”‚       pragma aborts_if_is_strict;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40 â”‚ â”‚     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚ â•°â”€â”€â”€â”€â”€^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:34: balance_of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         owner = 0x29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:35: balance_of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         ABORTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: exiting with verification errors</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>Prover çš„è¾“å‡ºå‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒæ‰¾åˆ°äº†ä¸€ç§è®© <code>balance_of</code> å‡½æ•°å¼‚å¸¸ä¸­æ­¢çš„æƒ…å½¢ï¼Œä½†æˆ‘ä»¬å´æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºè¿™ç§å¼‚å¸¸ä¸­æ­¢çš„å¯èƒ½ã€‚
æ¥ç€çœ‹è§¦å‘å¼‚å¸¸ä¸­æ­¢çš„ä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œå¼‚å¸¸æ˜¯åœ¨ <code>owner</code> ä¸æ‹¥æœ‰ <code>Balance&lt;CoinType&gt;</code> ç±»å‹çš„èµ„æºæ—¶è°ƒç”¨å†…ç½®çš„ <code>borrow_global</code> å‡½æ•°é€ æˆçš„ã€‚
æ ¹æ®é”™è¯¯ä¿¡æ¯çš„æŒ‡å¯¼ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥æ·»åŠ å¦‚ä¸‹çš„ <code>aborts_if</code> æ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec balance_of {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pragma aborts_if_is_strict;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æ·»åŠ è¿™ä¸ªæ¡ä»¶åï¼Œå°è¯•å†è°ƒç”¨ Proverï¼Œå¯ä»¥çœ‹åˆ°ä¸å†æœ‰éªŒè¯é”™è¯¯ã€‚
ç°åœ¨æˆ‘ä»¬å¯ä»¥æœ‰ä¿¡å¿ƒç¡®è®¤ï¼š
<code>balance_of</code> å‡½æ•°æœ‰ä¸”ä»…æœ‰ä¸€ç§å¼‚å¸¸ç»“æŸçš„å¯èƒ½ï¼Œé‚£å°±æ˜¯å‚æ•° <code>owner</code> ä¸æ‹¥æœ‰ <code>Balance&lt;CoinType&gt;</code> ç±»å‹çš„èµ„æºã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="éªŒè¯-withdraw-å‡½æ•°">éªŒè¯ <code>withdraw</code> å‡½æ•°<a class="hash-link" href="#éªŒè¯-withdraw-å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‡½æ•° <code>withdraw</code> çš„ç­¾åå¦‚ä¸‹:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">fun withdraw&lt;CoinType&gt;(addr: address, amount: u64) : Coin&lt;CoinType&gt; acquires Balance</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒçš„ä½œç”¨æ˜¯ä»åœ°å€ <code>addr</code> ä¸­å–å‡ºé‡‘é¢ä¸º <code>amount</code> çš„å¸ï¼Œå¹¶å°†å…¶è¿”å›ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æŒ‡å®š-widthdraw-çš„ä¸­æ­¢æ¡ä»¶">æŒ‡å®š <code>widthdraw</code> çš„ä¸­æ­¢æ¡ä»¶<a class="hash-link" href="#æŒ‡å®š-widthdraw-çš„ä¸­æ­¢æ¡ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>withdraw</code> æœ‰ä¸¤ç§å¼‚å¸¸ä¸­æ­¢çš„å¯èƒ½ï¼š</p><ol><li><code>addr</code> ä¸­æ²¡æœ‰ <code>Balance&lt;CoinType&gt;</code> ç±»å‹çš„èµ„æº</li><li><code>addr</code> ä¸­çš„ä½™é¢å°äº <code>amount</code></li></ol><p>æ ¹æ®è¿™äº›ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å®šä¹‰ä¸­æ­¢æ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec withdraw {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance &lt; amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œ</p><ul><li>ä¸€ä¸ª spec å—å¯ä»¥åŒ…å« let ç»‘å®šï¼Œå®ƒå¯ä»¥ç»™æ¯”è¾ƒé•¿çš„è¡¨è¾¾å¼ç»‘å®šä¸€ä¸ªåç§°ï¼Œå¹¶å¯ä»¥åå¤ä½¿ç”¨ã€‚
<code>global&lt;T&gt;(addr): T</code> æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›åœ°å€ <code>addr</code> å¤„ç±»å‹ä¸º <code>T</code> çš„èµ„æºã€‚
è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ let ç»‘å®šå°† <code>balance</code> è®¾ç½®ä¸º <code>addr</code> æ‰€æ‹¥æœ‰çš„ä»£å¸æ•°é‡ï¼›</li><li><code>exists&lt;T&gt;(address): bool</code>æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå¦‚æœèµ„æº <code>T</code> åœ¨åœ°å€ <code>addr</code> å¤„å­˜åœ¨ï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› false.</li></ul><p>è¿™ä¸¤è¡Œ <code>aborts_if</code> è¯­å¥å¯¹åº”äºä¸Šé¢æåˆ°çš„ä¸¤ä¸ªæ¡ä»¶ã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæŸä¸ªå‡½æ•°æœ‰å¤šä¸ª <code>aborts_if</code> æ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶å°±ä¼šè¢«æˆ–é€»è¾‘è¿æ¥èµ·æ¥ã€‚</p><p>åƒå‰é¢æåˆ°çš„é‚£æ ·ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æŒ‡å®šä»»ä½•å¼‚å¸¸ä¸­æ­¢çš„æ¡ä»¶ï¼ŒProver å°±ä¸ä¼šå¯¹å¼‚å¸¸ä¸­æ­¢ä½œä»»ä½•é™åˆ¶ã€‚
ä½†ä¸€æ—¦æˆ‘ä»¬ç»™å‡ºäº†ä»»ä½•ä¸€ç§ä¸­æ­¢çš„æ¡ä»¶ï¼ŒProver å°±é»˜è®¤æˆ‘ä»¬æƒ³ä¸¥æ ¼æ£€æŸ¥æ‰€æœ‰å¼‚å¸¸ä¸­æ­¢çš„å¯èƒ½ï¼Œå› æ­¤éœ€è¦åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„æ¡ä»¶ï¼Œ
ç›¸å½“äºéšå¼åŠ äº† <code>pragma aborts_if_is_strict</code> è¿™æ¡æŒ‡ç¤ºã€‚
å¦‚æœåªåˆ—å‡ºäº†éƒ¨åˆ†å¼‚å¸¸é€€å‡ºçš„æ¡ä»¶ï¼ŒProver ä¼šæŠ¥éªŒè¯é”™è¯¯ã€‚
ç„¶è€Œï¼Œå¦‚æœåœ¨ spec å—ä¸­å®šä¹‰äº† <code>pragma aborts_if_is_partial</code>, å°±ç›¸å½“äºå‘Šè¯‰ Proverï¼š</p><blockquote><p>æˆ‘åªæƒ³åˆ—å‡ºä¸€éƒ¨åˆ†ä¼šå¯¼è‡´å¼‚å¸¸ä¸­æ­¢çš„æ¡ä»¶ï¼Œè¯·ä»…ä»…éªŒè¯åœ¨è¿™äº›æ¡ä»¶ä¸‹æ˜¯å¦ä¼šå¼‚å¸¸ä¸­æ­¢ã€‚</p></blockquote><p>å¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥åšè¿™æ ·ä¸€ç»„å®éªŒæ¥éªŒè¯ï¼š</p><ul><li>å½“åˆ é™¤ä¸Šé¢ä¸¤ä¸ª <code>aborts_if</code> æ¡ä»¶å½“ä¸­çš„<strong>ä»»ä½•ä¸€ä¸ª</strong>æ—¶ï¼ŒProver å°†ä¼šæŠ¥é”™ï¼›</li><li>å½“åŒæ—¶åˆ é™¤æ‰€æœ‰ <code>aborts_if</code> æ¡ä»¶æ—¶ï¼ŒProver åè€Œä¸ä¼šæŠ¥é”™ï¼›</li><li>å½“åŠ ä¸Š <code>pragma aborts_if_is_partial</code> æ—¶ï¼Œæ— è®ºä¿ç•™å‡ æ¡ <code>aborts_if</code> æ¡ä»¶ï¼ŒProver éƒ½ä¸ä¼šæŠ¥é”™ï¼ˆå½“ç„¶äº†ï¼Œæ¡ä»¶æœ¬èº«è¦æ˜¯æ­£ç¡®çš„ï¼‰ã€‚</li></ul><p>æœ‰è¯»è€…å¯èƒ½ä¼šå¯¹ spec å—ä¸­ä¸‰ä¸ªè¯­å¥çš„é¡ºåºçš„æ’åˆ—äº§ç”Ÿå¥½å¥‡ï¼š
<code>balance</code> çš„å®šä¹‰ä¸ºä»€ä¹ˆå¯ä»¥å†™åœ¨ <code>aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr)</code> çš„åé¢ã€‚
å› ä¸ºï¼Œå¦‚æœåè€…æˆç«‹çš„è¯ï¼Œ<code>balance</code> å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„ã€‚è¿™ä¸ªé¡ºåºä¸ä¼šå¯¼è‡´ Prover å‡ºé”™å—ï¼Ÿ
ç®€å•åœ°è¯´ï¼šä¸ä¼šï¼Œspec å—å½“ä¸­çš„è¯­å¥æ˜¯å£°æ˜å¼çš„ï¼Œé¡ºåºæ²¡æœ‰ä»»ä½•å½±å“ã€‚</p><p>å¦‚æœæƒ³ä½œæ›´ç»†è‡´çš„äº†è§£ï¼Œå¯ä»¥å‚è€ƒ <a href="#TODO">MSL æ–‡æ¡£</a> ä»¥è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æŒ‡å®š-withdraw-çš„åŠŸèƒ½æ€§è´¨">æŒ‡å®š <code>withdraw</code> çš„åŠŸèƒ½æ€§è´¨<a class="hash-link" href="#æŒ‡å®š-withdraw-çš„åŠŸèƒ½æ€§è´¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®šä¹‰åŠŸèƒ½æ€§è´¨ã€‚
ä¸‹é¢ spec å—å½“ä¸­çš„ä¸¤ä¸ª <code>ensures</code> è¯­å¥ç»™å‡ºäº†æˆ‘ä»¬å¯¹ <code>widthdraw</code> åŠŸèƒ½ä¸Šçš„æœŸå¾…ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec withdraw {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance &lt; amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == balance - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures result == Coin&lt;CoinType&gt; { value: amount };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>è¿™æ®µä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ä½¿ç”¨ let post ç»‘å®šï¼ŒæŠŠ <code>balance_post</code> å®šä¹‰ä¸ºå‡½æ•°æ‰§è¡Œå <code>addr</code> çš„ä½™é¢ï¼Œå®ƒåº”è¯¥ç­‰äº <code>balance - amount</code>ã€‚
ç„¶åï¼Œ<code>result</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„åå­—ï¼Œè¡¨ç¤ºè¿”å›å€¼ï¼Œå®ƒåº”è¯¥æ˜¯é‡‘é¢ä¸º <code>amount</code> çš„ä»£å¸ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="éªŒè¯-deposit-å‡½æ•°">éªŒè¯ <code>deposit</code> å‡½æ•°<a class="hash-link" href="#éªŒè¯-deposit-å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‡½æ•° <code>deposit</code> çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">fun deposit&lt;CoinType&gt;(addr: address, check: Coin&lt;CoinType&gt;) acquires Balance</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒå°† <code>check</code> è¡¨ç¤ºçš„ä»£å¸èµ„é‡‘å­˜å…¥åˆ°åœ°å€ <code>addr</code> å½“ä¸­ã€‚å®ƒçš„è§„èŒƒå®šä¹‰å¦‚ä¸‹:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec deposit {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let check_value = check.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance + check_value &gt; MAX_U64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == balance + check_value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>è¿™é‡Œå°† <code>balance</code> å®šä¹‰ä¸ºå‡½æ•°æ‰§è¡Œå‰ <code>addr</code> ä¸­çš„ä½™é¢ï¼Œå°† <code>check_value</code> å®šä¹‰ä¸ºè¦å­˜å…¥çš„ä»£å¸é‡‘é¢ã€‚å®ƒåœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹ä¼šå¼‚å¸¸ä¸­æ–­ï¼š</p><ol><li><code>addr</code> ä¸­æ²¡æœ‰ç±»å‹ä¸º <code>Balance&lt;CoinType&gt;</code> çš„èµ„æºï¼›</li><li>æˆ–è€… <code>balance</code> å’Œ <code>check_value</code> ä¹‹å’Œå¤§äº <code>u64</code> ç±»å‹çš„æœ€å¤§å€¼ã€‚</li></ol><p><code>ensures</code> è¯­å¥ç”¨äºè®© Prover ç¡®å®šåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå‡½æ•°æ‰§è¡Œå <code>addr</code> ä¸­çš„ä½™é¢éƒ½å¯ä»¥è¢«æ­£ç¡®åœ°æ›´æ–°ã€‚</p><p>å‰é¢æåˆ°è¿‡çš„è¯­æ³•æ­¤å¤„ä¸å†èµ˜è¿°ã€‚
æ•é”çš„è¯»è€…å¯èƒ½å·²ç»å‘ç°ï¼Œæœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„ï¼šè¡¨è¾¾å¼ <code>balance + check_value &gt; MAX_U64</code> åœ¨ Move ç¨‹åºä¸­æ˜¯æœ‰é—®é¢˜çš„ã€‚
å› ä¸ºå·¦è¾¹çš„åŠ æ³•ä¼šå¯èƒ½å¼•èµ·æº¢å‡ºçš„å¼‚å¸¸ã€‚
å¦‚æœæˆ‘ä»¬åœ¨ Move ç¨‹åºä¸­æƒ³å†™ä¸€ä¸ªç±»ä¼¼çš„æ£€æŸ¥ï¼Œåº”è¯¥ç”¨ç±»ä¼¼ <code>balance &gt; MAX_U64 - check_value</code> çš„è¡¨è¾¾å¼æ¥é¿å¼€æº¢å‡ºçš„é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åœ¨ Move è§„èŒƒè¯­è¨€ï¼ˆMSLï¼‰ä¸­å´å®Œå…¨æ²¡é—®é¢˜ã€‚
ç”±äº spec å—ä½¿ç”¨çš„æ˜¯ MSL è¯­è¨€ï¼Œå®ƒçš„ç±»å‹ç³»ç»Ÿå’Œ Move ä¸ä¸€æ ·ã€‚
MSL ä¸­ï¼Œæ‰€æœ‰çš„æ•´æ•°éƒ½æ˜¯ <code>num</code> ç±»å‹ï¼Œå®ƒæ˜¯æ•°å­¦æ„ä¹‰ä¸Šçš„æ•´æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯æœ‰ç¬¦å·æ•°ï¼Œè€Œä¸”æ²¡æœ‰å¤§å°é™åˆ¶ã€‚
å½“åœ¨ MSL ä¸­å¼•ç”¨ Move ç¨‹åºä¸­çš„æ•°æ®æ—¶ï¼Œæ‰€æœ‰å†…ç½®æ•´æ•°ç±»å‹ ï¼ˆ<code>u8</code>ï¼Œ<code>u64</code> ç­‰ï¼‰éƒ½ä¼šè¢«è‡ªåŠ¨è½¬æ¢æˆ <code>num</code> ç±»å‹ã€‚
åœ¨ MSL æ–‡æ¡£ä¸­å¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„å…³äºç±»å‹ç³»ç»Ÿçš„è¯´æ˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="éªŒè¯-transfer-å‡½æ•°">éªŒè¯ <code>transfer</code> å‡½æ•°<a class="hash-link" href="#éªŒè¯-transfer-å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‡½æ•° <code>transfer</code> çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public fun transfer&lt;CoinType: drop&gt;(from: &amp;signer, to: address, amount: u64, _witness: CoinType) acquires Balance</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒè´Ÿè´£ä»è´¦æˆ· <code>from</code> åˆ°åœ°å€ <code>to</code> çš„è½¬è´¦ï¼Œè½¬è´¦é‡‘é¢ä¸º <code>amount</code>. </p><p>æˆ‘ä»¬å…ˆæš‚æ—¶å¿½ç•¥å¼‚å¸¸ä¸­æ­¢æ¡ä»¶ï¼Œåªè€ƒè™‘å®ƒçš„åŠŸèƒ½æ€§è´¨ï¼Œæ¥è¯•è¯•å°†å…¶éªŒè¯è§„èŒƒå†™å‡ºæ¥ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec transfer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let addr_from = Signer::address_of(from);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance_from = global&lt;Balance&lt;CoinType&gt;&gt;(addr_from).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance_to = global&lt;Balance&lt;CoinType&gt;&gt;(to).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_from_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr_from).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_to_post = global&lt;Balance&lt;CoinType&gt;&gt;(to).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_from_post == balance_from - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_to_post == balance_to + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>è¿™é‡Œçš„ <code>from</code> æ˜¯ <code>signer</code> ç±»å‹ï¼Œè€Œå¹¶éä¸€ä¸ªç›´æ¥çš„åœ°å€ã€‚
è™½ç„¶ç¨‹åºä¸­æˆ‘ä»¬æœ‰åˆ›å»ºä¸€ä¸ªåä¸º <code>addr_from</code> çš„å±€éƒ¨å˜é‡ï¼Œä½†åœ¨ spec å—ä¸­æˆ‘ä»¬æ— æ³•ç›´æ¥å¼•ç”¨å®ƒã€‚
åŒæ—¶ï¼Œè¿™ä¸ªåœ°å€çš„è¡¨è¾¾å¼è¦é‡å¤å¥½å‡ æ¬¡ï¼Œåå¤ä¹¦å†™å¾ˆç´¯èµ˜ï¼Œæˆ‘ä»¬å†æ¬¡æŠŠå®ƒç»‘å®šåˆ° <code>addr_from</code> ä¸Šé¢ã€‚
ç„¶åç”¨ let å’Œ let post å®šä¹‰å‡ ä¸ªå˜é‡ï¼Œå¯¹åº”ç€å‡½æ•°æ‰§è¡Œå‰å <code>addr_from</code> å’Œ <code>to</code> ä¸¤ä¸ªåœ°å€å†…çš„ä½™é¢ã€‚
æœ€åç”¨ <code>ensures</code> è¯­å¥å‘Šè¯‰ Prover <code>from</code> å†…çš„ä½™é¢åº”è¯¥å‡å» <code>amount</code>ï¼›<code>to</code> å†…çš„ä½™é¢ä»¥åº”è¯¥å¢åŠ  <code>amount</code>ã€‚</p><p>ä¹çœ‹ä¹‹ä¸‹ï¼Œä¼¼ä¹å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚å¯æ˜¯çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ
æˆ‘ä»¬æ¥çœ‹çœ‹ Prover æ˜¯å¦è®¤ä¸ºè¿™å°±æ˜¯ã€Œå¯¹è¿™ä¸ªå‡½æ•°è¡Œä¸ºçš„æ­£ç¡®æè¿°ã€ã€‚
åœ¨è¾“å…¥ <code>mpm package prover</code> åå¯ä»¥çœ‹åˆ°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">error: post-condition does not hold</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”Œâ”€ ./sources/BasicCoin.move:58:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">58 â”‚         ensures balance_from_post == balance_from - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:45: transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:51: transfer (spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:53: transfer (spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:54: transfer (spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =     at ./sources/BasicCoin.move:45: transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         from = signer{0x0}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         to = 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         amount = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   =         _witness = &lt;generic&gt;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>ä»¤äººæœ‰äº›å‡ºä¹æ„æ–™ï¼ŒProver æç¤ºäº†åç½®æ¡ä»¶ä¸æ»¡è¶³ï¼Œè¯´æ˜å‰é¢çš„ spec å—ä¸­çš„æ‰€æè¿°çš„è¡Œä¸ºå’Œ <code>transfer</code> å‡½æ•°å¹¶ä¸å®Œå…¨ä¸€è‡´ã€‚
ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬å†å¾€ä¸‹çœ‹ï¼šä½¿å¾—åç½®æ¡ä»¶ä¸æ»¡è¶³çš„çš„å‚æ•°æ˜¯ <code>from = signer{0x0}</code> å’Œ <code>to = 0x0</code>.
çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥æ¸…æ¥šåŸå› äº†ï¼šå½“è´¦æˆ·å‘è‡ªå·±è½¬è´¦æ—¶ï¼Œ<code>to</code> å’Œ <code>from</code> æŒ‡å‘çš„åœ°å€éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä½™é¢ä¸äº§ç”Ÿä»»ä½•å˜åŒ–ã€‚</p><p>ç°åœ¨æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p><p><strong>æ–¹æ¡ˆç”²</strong> ä¸ä¿®æ”¹å‡½æ•°å®šä¹‰ï¼Œæ”¹å˜è§„èŒƒï¼Œåœ¨ spec å—ä¸­åˆ†æƒ…å†µè€ƒè™‘è½¬è´¦æ”¶å‘è´¦æˆ·äºŒè€…æ˜¯å¦æ˜¯åŒä¸€åœ°å€ä¸¤ç§æƒ…å½¢ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">let post eq_post = balance_to == balance_to_post;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let post ne_post = balance_from_post == balance_from - amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &amp;&amp; balance_to_post   == balance_to   + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ensures (addr_from == to &amp;&amp; eq_post) || (addr_from != to &amp;&amp; ne_post);</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æˆ–è€…ç”¨å¦ä¸€ç§ç¨å¾®ç›´è§‚äº›çš„ if è¯­æ³•ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">let post eq_post = balance_to == balance_to_post;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let post ne_post = balance_from_post == balance_from - amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &amp;&amp; balance_to_post   == balance_to   + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ensures if (addr_from == to) eq_post else ne_post;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æ³¨æ„è¿™é‡Œçš„ <code>if (P) E1 else E2</code> å’Œç¨‹åºé€»è¾‘ä¸­çš„æ¡ä»¶æ‰§è¡Œä¸å¤ªç›¸åŒâ€”â€”
å®ƒå®é™…ä¸Šæ˜¯ä¸ªè¯­æ³•ç³–ï¼Œç­‰ä»·äºåŒæ—¶ <code>ensures</code> äº† <code>P ==&gt; E1</code> å’Œ <code>!P ==&gt; E2</code>ã€‚
è€Œ <code>p ==&gt; q</code> åˆå®é™…ä¸Šå°±æ˜¯ <code>!p || q</code>.</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬äºŒç§å†™æ³•çš„æœ«å°¾å®é™…ä¸Šè¡¨ç¤ºè¿™æ ·çš„é€»è¾‘ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ensures (addr_from == to  ===&gt;  eq_post) &amp;&amp; (addr_from != to  ===&gt; ne_post);</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å³</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ensures (addr_from != to || eq_post) &amp;&amp; (addr_from == to  || ne_post);</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥é€šè¿‡ç›´å€¼è¡¨æˆ–åŒ–ç®€åˆ°èŒƒå¼çš„æ–¹å¼è‡ªè¡ŒéªŒè¯ä¸€ä¸‹ï¼Œ
å‰é¢çš„ <code>(addr_from == to &amp;&amp; eq_post) || (addr_from != to &amp;&amp; ne_post)</code>
å’Œåé¢çš„ <code>(addr_from != to || eq_post) &amp;&amp; (addr_from == to  || ne_post)</code>
å®é™…ä¸Šä¹Ÿæ˜¯å®Œå…¨ç­‰ä»·çš„è¡¨è¾¾å¼ã€‚</p><p><strong>æ–¹æ¡ˆä¹™</strong> ä¸ä¿®æ”¹ specï¼Œç›´æ¥åœ¨å‡½æ•°ä½“å†…åŠ ä¸Š <code>assert!(from_addr != to, EEQUAL_ADDR)</code>ï¼Œ
å¹¶åœ¨å‰é¢åŠ ä¸Šé”™è¯¯ç  <code>EEQUAL_ADDR</code> çš„å®šä¹‰ï¼Œè®©è‡ªæˆ‘è½¬è´¦äº¤æ˜“æ— æ³•å®Œæˆã€‚</p><p>æ˜¾ç„¶ï¼Œè‡ªå·±ç»™è‡ªå·±è½¬è´¦å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä¸å¦‚ç›´æ¥ç¦æ­¢è¿™ç§äº¤æ˜“ã€‚
å› æ­¤æ–¹æ¡ˆä¹™æ˜¯æ›´å¥½çš„åšæ³•ã€‚å®ƒç›´æ¥ä¿è¯äº†æˆåŠŸæ‰§è¡Œæ—¶ä¸¤è€…è‚¯å®šä¸æ˜¯åŒä¸€åœ°å€ï¼Œè€Œä¸”ä»£ç ä¹Ÿæ›´ä¸ºç®€æ´ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç»ƒä¹ ">ç»ƒä¹ <a class="hash-link" href="#ç»ƒä¹ " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç›®å‰æˆ‘ä»¬åªå®Œæˆäº† <code>transfer</code> å‡½æ•°çš„åŠŸèƒ½æ€§éªŒè¯ã€‚ä½†æ²¡æœ‰è¯´æ˜å®ƒä¼šåœ¨å“ªäº›æƒ…å†µä¸‹å¼‚å¸¸ä¸­æ­¢ã€‚
ä½œä¸ºç»ƒä¹ ï¼Œè¯·ç»™å®ƒåŠ ä¸Šåˆé€‚çš„ <code>aborts_if</code> æ¡ä»¶ã€‚ç­”æ¡ˆå¯ä»¥åœ¨åé¢ç« èŠ‚ä¸­æ‰¾åˆ°ã€‚TODO</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="éªŒè¯-mint-å‡½æ•°">éªŒè¯ <code>mint</code> å‡½æ•°<a class="hash-link" href="#éªŒè¯-mint-å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‡½æ•° <code>mint</code> çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public fun mint&lt;CoinType: drop&gt;(mint_addr: address, amount: u64, _witness: CoinType) acquires Balance</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒè´Ÿè´£é“¸é€ å‡ºé‡‘é¢ä¸º <code>amount</code> çš„ä»£å¸ï¼Œå¹¶å­˜åˆ°åœ°å€ <code>mint_addr</code> ä¸­ã€‚
æ¯”è¾ƒæœ‰è¶£çš„æ˜¯ <code>_witness</code>ï¼Œå…¶ç±»å‹ä¸º <code>CoinType</code>ã€‚
å› ä¸ºåªæœ‰å®šä¹‰ <code>CoinType</code> çš„æ¨¡å—æ‰èƒ½æ„é€ å‡ºè¿™ä¸ªç±»å‹çš„å€¼ï¼Œè¿™å°±ä¿è¯äº†è°ƒç”¨è€…èº«ä»½ã€‚</p><p><code>mint</code> å‡½æ•°ä¸­å®é™…ä¸Šåªæœ‰ä¸€å¥å¯¹ <code>deposit</code> çš„è°ƒç”¨ã€‚ä¸éš¾æƒ³åˆ°ï¼Œå®ƒä»¬ä¿©çš„è¦æ»¡è¶³çš„è§„èŒƒåº”è¯¥æœ‰å¾ˆå¤šçš„ç›¸ä¼¼ä¹‹å¤„ã€‚ ç…§çŒ«ç”»è™ï¼Œä¸éš¾å†™å‡º:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec mint {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(mint_addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(mint_addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance + amount &gt; MAX_U64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(mint_addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == balance + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="éªŒè¯-publish_balance-å‡½æ•°">éªŒè¯ <code>publish_balance</code> å‡½æ•°<a class="hash-link" href="#éªŒè¯-publish_balance-å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‡½æ•° <code>publish_balance</code> çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public fun publish_balance&lt;CoinType&gt;(account: &amp;signer)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒåœ¨ <code>account</code> ä¸‹å‘å¸ƒä¸€ä¸ªç©ºçš„ <code>Balance&lt;CoinType&gt;</code> ç±»å‹çš„èµ„æºã€‚å› æ­¤å¦‚æœèµ„æºå·²ç»å­˜åœ¨æ—¶åº”å½“å¼‚å¸¸é€€å‡ºï¼Œè€Œæ­£å¸¸ç»“æŸæ˜¯ä½™é¢åº”å½“æ˜¯é›¶ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec publish_balance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let addr = Signer::address_of(account);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="ä½¿ç”¨-schema-ç®€åŒ–å†—ä½™è§„èŒƒ">ä½¿ç”¨ Schema ç®€åŒ–å†—ä½™è§„èŒƒ<a class="hash-link" href="#ä½¿ç”¨-schema-ç®€åŒ–å†—ä½™è§„èŒƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ­å–œï¼åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä¸€æ­¥ä¸€æ­¥å®Œæˆäº† BasicCoin çš„å…¨éƒ¨å‡½æ•°çš„éªŒè¯ã€‚
ä½†æ˜¯ï¼Œå¦‚æœä»”ç»†çœ‹ä»£ç çš„è¯ï¼Œä¸å°‘ spec å—çœ‹èµ·æ¥ååˆ†ç›¸ä¼¼ï¼Œå¦‚æœèƒ½è®©å®ƒä»¬ç²¾ç®€ä¸€äº›çš„è¯ï¼Œæ–‡ä»¶ç»“æ„ä¼šæ›´æ¸…æ™°ã€‚</p><p>Schema æ˜¯ä¸€ç§é€šè¿‡å°†å±æ€§åˆ†ç»„æ¥æ„å»ºè§„èŒƒçš„æ‰‹æ®µã€‚
ä»è¯­ä¹‰ä¸Šè®²ï¼Œå®ƒä»¬ä¹Ÿæ˜¯è¯­æ³•ç³–ï¼Œåœ¨ spec å—ä¸­ä½¿ç”¨å®ƒä»¬ç­‰ä»·äºå°†å®ƒä»¬åŒ…å«çš„æ¡ä»¶å±•å¼€åˆ°å‡½æ•°ã€ç»“æ„æˆ–æ¨¡å—ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ¶ˆé™¤ç®€å•é‡å¤">æ¶ˆé™¤ç®€å•é‡å¤<a class="hash-link" href="#æ¶ˆé™¤ç®€å•é‡å¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½œä¸ºä¸€ä¸ªæœ€æ˜æ˜¾çš„ä¾‹å­ï¼Œ<code>mint</code> å’Œ <code>deposit</code> çš„ spec å—é™¤äº†å˜é‡åæœ‰ç‚¹ä¸ä¸€æ ·
ï¼ˆç”¨æœ¯è¯­æ¥è¯´ï¼Œå®ƒä»¬æ˜¯<a href="https://en.wikipedia.org/wiki/Lambda_calculus#%CE%B1-conversion" target="_blank" rel="noopener noreferrer">å¯ alpha è½¬æ¢</a>çš„ï¼‰ï¼Œ
æ•´ä½“ç»“æ„å¯ä»¥è¯´æ˜¯å®Œå…¨ä¸€è‡´ã€‚
ä¸ºäº†ç®€åŒ–å®ƒä»¬ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª Schema:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec schema DepositSchema&lt;CoinType&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addr: address;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amount: u64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance + amount &gt; MAX_U64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == balance + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>è¿™ä¸ª Schema å£°æ˜äº†ä¸¤ä¸ªæœ‰ç±»å‹çš„å˜é‡ï¼Œä»¥åŠä¸€äº›å…³äºè¿™äº›å˜é‡åº”è¯¥æ»¡è¶³çš„æ¡ä»¶ã€‚
å½“å…¶å®ƒåœ°æ–¹æƒ³ç”¨è¿™ä¸ª Schema çš„æ—¶å€™ï¼Œå°±è¦ç”¨ <code>include DepositSchema {addr: XX, amount: YY}</code> æ¥å¯¼å…¥å®ƒã€‚
å…¶ä¸­ <code>XX</code> å’Œ <code>YY</code> åˆ†æ˜¯ç”¨æ¥æ›¿ä»£ <code>addr</code> å’Œ <code>amount</code> çš„è¡¨è¾¾å¼ã€‚
å¦‚æœè¡¨è¾¾å¼å’Œå¯¹åº”çš„å˜é‡åæ­£å¥½ä¸€æ ·ï¼Œåˆšå¯ä»¥åªå†™å˜é‡åï¼Œæˆ–è€…ç›´æ¥çœç•¥ã€‚</p><p>æœ‰äº†ä¸Šé¢çš„ Schema å®šä¹‰ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç®€åŒ–ä¹‹å‰çš„ spec äº†ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec mint {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  include DepositSchema&lt;CoinType&gt; {addr: mint_addr};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec deposit {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include DepositSchema&lt;CoinType&gt; {amount: check.value};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="schema-ç»„åˆ">Schema ç»„åˆ<a class="hash-link" href="#schema-ç»„åˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Schema ä¸ä»…å¯ä»¥æ¶ˆé™¤ä¸Šé¢è¿™ç§å‡ ä¹ä¸€æ ·çš„é‡å¤ï¼Œä¹Ÿå¯ä»¥ç»„åˆèµ·æ¥ï¼Œç»„æˆæ›´ä¸ºå¤æ‚çš„è§„èŒƒã€‚</p><p>å¦‚æœä½ æŒ‰æ•™ç¨‹æ¯ä¸€æ­¥è¿›è¡Œäº†å®éªŒå¹¶å®Œæˆäº†ç»ƒä¹ ï¼Œç°åœ¨ä½ çš„ <code>tranfer</code> å‡½æ•°çš„ spec åº”è¯¥å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// åˆå§‹ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec transfer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let addr_from = Signer::address_of(from);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance_from = global&lt;Balance&lt;CoinType&gt;&gt;(addr_from).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance_to = global&lt;Balance&lt;CoinType&gt;&gt;(to).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_from_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr_from).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_to_post = global&lt;Balance&lt;CoinType&gt;&gt;(to).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr_from);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(to);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance_from &lt; amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance_to + amount &gt; MAX_U64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if addr_from == to;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_from_post == balance_from - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_to_post == balance_to + amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>å®ƒè™½ç„¶ç›¸å¯¹å¤æ‚ï¼Œä½†ç»è¿‡ä¸€ç‚¹åˆ†æè¿˜æ˜¯ä¸éš¾çœ‹å‡ºï¼Œå®é™…ä¸Šç³…åˆäº† <code>withdraw</code> å’Œ <code>deposit</code> ä¸¤ç§é€»è¾‘ã€‚
è¿™ä¸€ç‚¹ä» <code>transfer</code> çš„è°ƒç”¨å…³ç³»ä¹Ÿå¯ä»¥åˆ†æå‡ºæ¥ã€‚</p><p>åœ¨å‰é¢ä¸€æ­¥å½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº† <code>DepositSchema</code>ã€‚
ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ <code>withdraw</code> çš„éªŒè¯è§„èŒƒé‡æ„ä¸€ä¸‹ï¼šæŠŠå®ƒæå–æˆä¸€ä¸ª Schemaï¼Œä»¥åŠä¸€ä¸ªç”¨åˆ°æ­¤ Schema çš„ spec å—ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec withdraw {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include WithdrawSchema&lt;CoinType&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures result == Coin&lt;CoinType&gt; { value: amount };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec schema WithdrawSchema&lt;CoinType&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addr: address;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amount: u64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let balance = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if !exists&lt;Balance&lt;CoinType&gt;&gt;(addr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if balance &lt; amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let post balance_post = global&lt;Balance&lt;CoinType&gt;&gt;(addr).coin.value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensures balance_post == balance - amount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æœ‰äº†è¿™ä¸¤ä¸ª Schemaï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°æ”¹å†™ <code>transfer</code> çš„éªŒè¯è§„èŒƒäº†ï¼š</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ Schema é‡æ„å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec transfer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let addr_from = Signer::address_of(from);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include WithdrawSchema&lt;CoinType&gt; { addr: addr_from };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include DepositSchema&lt;CoinType&gt; { addr: to };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aborts_if addr_from == to;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_wuS7 clean-btn">å¤åˆ¶</button></div></div><p>æ€ä¹ˆæ ·ï¼Ÿå’Œåˆå§‹ç‰ˆæœ¬å¯¹æ¯”èµ·æ¥ï¼Œç°åœ¨æ˜¯ä¸æ˜¯ç®€å•æ¸…æ™°å¤šäº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç»ƒä¹ -1">ç»ƒä¹ <a class="hash-link" href="#ç»ƒä¹ -1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é™¤äº†ä¸Šé¢çš„ç¤ºä¾‹ä»¥å¤–ï¼Œå†æ‰¾ä¸€ä¸ª spec å—ï¼ˆä¾‹å¦‚ <code>publish_balance</code>ï¼‰ï¼Œ
å°†å®ƒä¹Ÿæ‹†åˆ†æˆä¸€ä¸ª Schema å£°æ˜å’Œä¸€ä¸ªä½¿ç”¨å¯¹åº” Schema çš„ spec å—ã€‚
ä½œä¸ºä¸€ä¸ªç»ƒä¹ ï¼Œä½ åˆ›å»ºçš„ Schema å¯èƒ½åœ¨è¿™ä»½ä»£ç ä¸­æ— æ³•åˆ©ç”¨ï¼Œæ‰€ä»¥æ„Ÿè§‰çœ‹ä¸å‡ºä»€ä¹ˆå¥½å¤„ã€‚
ä½†å¦‚æœåœ¨åé¢å¼€å‘ä¸­ï¼Œæœ‰åˆ«çš„å‡½æ•°è°ƒç”¨ <code>publish_balance</code>ï¼Œå°±ä¼šæ›´æ–¹ä¾¿äº†ï¼Œ</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/starcoinorg/starcoin-cookbook/edit/main/docs/03-move/100-move-prover/02-mvp-tutorial.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/starcoin-cookbook/zh/docs/move/move-prover/move-spec-language"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Move è§„èŒƒè¯­è¨€</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/starcoin-cookbook/zh/docs/web3/"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">How to build DApp on Starcoin</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ä»€ä¹ˆæ˜¯-move-prover" class="table-of-contents__link toc-highlight">ä»€ä¹ˆæ˜¯ Move Prover</a></li><li><a href="#å®‰è£…-prover-çš„ä¾èµ–" class="table-of-contents__link toc-highlight">å®‰è£… Prover çš„ä¾èµ–</a></li><li><a href="#å‡†å¤‡è¦éªŒè¯çš„ç¤ºä¾‹" class="table-of-contents__link toc-highlight">å‡†å¤‡è¦éªŒè¯çš„ç¤ºä¾‹</a><ul><li><a href="#é¡¹ç›®åˆ›å»º" class="table-of-contents__link toc-highlight">é¡¹ç›®åˆ›å»º</a></li><li><a href="#æ¨¡å—ä»£ç " class="table-of-contents__link toc-highlight">æ¨¡å—ä»£ç </a></li><li><a href="#toml-é…ç½®" class="table-of-contents__link toc-highlight">TOML é…ç½®</a></li></ul></li><li><a href="#ç¬¬ä¸€æ®µéªŒè¯ä»£ç " class="table-of-contents__link toc-highlight">ç¬¬ä¸€æ®µéªŒè¯ä»£ç </a></li><li><a href="#éªŒè¯-withdraw-å‡½æ•°" class="table-of-contents__link toc-highlight">éªŒè¯ <code>withdraw</code> å‡½æ•°</a><ul><li><a href="#æŒ‡å®š-widthdraw-çš„ä¸­æ­¢æ¡ä»¶" class="table-of-contents__link toc-highlight">æŒ‡å®š <code>widthdraw</code> çš„ä¸­æ­¢æ¡ä»¶</a></li><li><a href="#æŒ‡å®š-withdraw-çš„åŠŸèƒ½æ€§è´¨" class="table-of-contents__link toc-highlight">æŒ‡å®š <code>withdraw</code> çš„åŠŸèƒ½æ€§è´¨</a></li></ul></li><li><a href="#éªŒè¯-deposit-å‡½æ•°" class="table-of-contents__link toc-highlight">éªŒè¯ <code>deposit</code> å‡½æ•°</a></li><li><a href="#éªŒè¯-transfer-å‡½æ•°" class="table-of-contents__link toc-highlight">éªŒè¯ <code>transfer</code> å‡½æ•°</a><ul><li><a href="#ç»ƒä¹ " class="table-of-contents__link toc-highlight">ç»ƒä¹ </a></li></ul></li><li><a href="#éªŒè¯-mint-å‡½æ•°" class="table-of-contents__link toc-highlight">éªŒè¯ <code>mint</code> å‡½æ•°</a></li><li><a href="#éªŒè¯-publish_balance-å‡½æ•°" class="table-of-contents__link toc-highlight">éªŒè¯ <code>publish_balance</code> å‡½æ•°</a></li><li><a href="#ä½¿ç”¨-schema-ç®€åŒ–å†—ä½™è§„èŒƒ" class="table-of-contents__link toc-highlight">ä½¿ç”¨ Schema ç®€åŒ–å†—ä½™è§„èŒƒ</a><ul><li><a href="#æ¶ˆé™¤ç®€å•é‡å¤" class="table-of-contents__link toc-highlight">æ¶ˆé™¤ç®€å•é‡å¤</a></li><li><a href="#schema-ç»„åˆ" class="table-of-contents__link toc-highlight">Schema ç»„åˆ</a></li><li><a href="#ç»ƒä¹ -1" class="table-of-contents__link toc-highlight">ç»ƒä¹ </a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/starcoin-cookbook/zh/docs/intro">Documents</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/starcoin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discor.gg/starcoin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/starcoin_contributor" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Developer Telegram group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/StarcoinSTC" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/starcoinorg/starcoin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Starcoin, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/starcoin-cookbook/zh/assets/js/runtime~main.0d178442.js"></script>
<script src="/starcoin-cookbook/zh/assets/js/main.de359a5d.js"></script>
</body>
</html>